---
title: "3-1: R packages"
output: 
  learnr::tutorial:
    theme: lumen
runtime: shiny_prerendered
description: >
  Students learn how to create a package in R.
---

```{r setup, include=FALSE}
library(learnr)

knitr::opts_chunk$set(error = TRUE)
options(knitr.kable.NA = '')

set.seed(123)
```

## Overview

*In this practical we will learn how to create an R package.*

## Background

For more information, follow this [link](https://r-pkgs.org).

## Tasks

We have written a function that will generate an R package for you to 
look at. In the following example, we have set 
<span style="color: #de77ae;">~/Desktop/git</span> as our working directory
(this is where we keep all of our projects) and run `dummy_package()`, without 
any arguments. 

A new instance of RStudio should open:

```{r echo = FALSE, fig.align = "center", out.width = "100%"}
knitr::include_graphics('images/package.png')
```

You should find that (1) your working directory is now 
<span style="color: #de77ae;">package0301</span>, (2) inside this directory
are a number of files and directories:

* <span style="color: #de77ae;">.gitignore</span>: contains regular
expressions that should be ignored by Git, more info
[here](https://www.pluralsight.com/guides/how-to-use-gitignore-file)
* <span style="color: #de77ae;">.Rbuildignore</span>: contains regular
expressions that should be ignored by R CMD check / when building the package 
from source, more info
[here](https://r-pkgs.org/package-structure-state.html#rbuildignore)
* <span style="color: #de77ae;">.Rhistory</span>: contains R command history, 
accessed by pressing the up key in the Console
* <span style="color: #de77ae;">demo/</span>: contains R demo files, more info
[here](https://r-pkgs.org/misc.html#demo) (which we've populated with 
<span style="color: #de77ae;">run-birth-death.R</span>, the
script from Practical 1-5)
* <span style="color: #de77ae;">DESCRIPTION</span>: contains metadata about 
your package, more info [here](https://r-pkgs.org/description.html)
* <span style="color: #de77ae;">man/</span>: contains code used to generate 
documentation when the package is built, more info 
[here](https://r-pkgs.org/man.html#man-workflow); don't edit these files
* <span style="color: #de77ae;">NAMESPACE</span>: contains the names of 
imported and exported functions, more info
[here](https://r-pkgs.org/namespace.html#namespace); don't edit this file
* <span style="color: #de77ae;">package0301.Rproj</span>: an RStudio project 
file, which is used to make this directory an RStudio project, and can be used 
as a shortcut for opening this project from your filesystem, more info 
[here](https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects)
* <span style="color: #de77ae;">R/</span>: contains code used to generate 
functions when the package is built, more info (which we've populated with 
<span style="color: #de77ae;">step_deterministic_birth_death.R</span>, the
step function from Practical 1-5)
[here](https://r-pkgs.org/r.html#code-organising)

and (3) an RStudio project has been set up, called 
<span style="color: #de77ae;">package0301</span>. Feel free to explore these 
files and make sure you have a good grasp of what they do.

To install this package on your machine, make sure you're in the root directory 
(in this case, <span style="color: #de77ae;">~Desktop/git/package0301/</span>) 
and run:

```{r, eval = FALSE}
devtools::install()
```

Note that `devtools::` is equivant to calling `library()` on `devtools`, so if 
you've already done that, you can just call `install()` directly.

### Demo

Try running the demo:

```{r eval = FALSE}
demo(topic = "run-birth-death", package = "package0301")
```

As you can see in <span style="color: #de77ae;">demo/run-birth-death.R</span>, 
this is just a standard script. Any script in 
<span style="color: #de77ae;">demo</span> that has been installed as part of a 
package can be run using `demo()`. Calling `demo(package = "package0301")` lists
all of the demos installed as part of the {package0301} package. Note the 
<span style="color: #de77ae;">demo/00Index</span> file, which is lists each 
demo alongside a description.

### Package documentation

Look at the package documentation by using the `help()` function, or running:

```{r eval = FALSE}
library(package0301) 
?package0301
```

This documentation was generated from 
<span style="color: #de77ae;">R/package0301-package</span>. If you scroll to 
the bottom of the help function and click on 
<span style="color: #de77ae;">Index</span> you'll get a list of functions 
exported by this package. 

### Function documentation

Look at the help file for `step_deterministic_birth_death.R()` and compare this
to <span style="color: #de77ae;">R/step_deterministic_birth_death.R</span>, 
which gives you a simple example of how functions are documented. 
