<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R Packages • RPiR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="R Packages">
<meta property="og:description" content="RPiR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">RPiR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.59.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-chalkboard-teacher"></span>
     
    Lectures (slides)
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../lectures/RPiR1-intro.html">RPiR1-intro</a>
    </li>
    <li>
      <a href="../../lectures/RPiR2a-R.html">RPiR2a-R</a>
    </li>
    <li>
      <a href="../../lectures/RPiR2b-modelling.html">RPiR2b-modelling</a>
    </li>
    <li>
      <a href="../../lectures/RPiR2c-development.html">RPiR2c-development</a>
    </li>
    <li>
      <a href="../../lectures/RPiR4a-git.html">RPiR4a-git</a>
    </li>
    <li>
      <a href="../../lectures/RPiR4b-modelling.html">RPiR4b-modelling</a>
    </li>
    <li>
      <a href="../../lectures/RPiR5a-reporting.html">RPiR5a-reporting</a>
    </li>
    <li>
      <a href="../../lectures/RPiR5b-R.html">RPiR5b-R</a>
    </li>
    <li>
      <a href="../../lectures/RPiR6a-R.html">RPiR6a-R</a>
    </li>
    <li>
      <a href="../../lectures/RPiR7a-R.html">RPiR7a-R</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-chalkboard-teacher"></span>
     
    Lectures (html)
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../lectures_html/RPiR1-intro.html">RPiR1-intro</a>
    </li>
    <li>
      <a href="../../lectures_html/RPiR2a-R.html">RPiR2a-R</a>
    </li>
    <li>
      <a href="../../lectures_html/RPiR2b-modelling.html">RPiR2b-modelling</a>
    </li>
    <li>
      <a href="../../lectures_html/RPiR2c-development.html">RPiR2c-development</a>
    </li>
    <li>
      <a href="../../lectures_html/RPiR4a-git.html">RPiR4a-git</a>
    </li>
    <li>
      <a href="../../lectures_html/RPiR4b-modelling.html">RPiR4b-modelling</a>
    </li>
    <li>
      <a href="../../lectures_html/RPiR5a-reporting.html">RPiR5a-reporting</a>
    </li>
    <li>
      <a href="../../lectures_html/RPiR5b-R.html">RPiR5b-R</a>
    </li>
    <li>
      <a href="../../lectures_html/RPiR6a-R.html">RPiR6a-R</a>
    </li>
    <li>
      <a href="../../lectures_html/RPiR7a-R.html">RPiR7a-R</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-chalkboard-teacher"></span>
     
    Practicals (html)
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../tutorials/practical2-1/practical2-1.html">Practical2-1</a>
    </li>
    <li>
      <a href="../../tutorials/practical2-2/practical2-2.html">Practical2-2</a>
    </li>
    <li>
      <a href="../../tutorials/practical2-3/practical2-3.html">Practical2-3</a>
    </li>
    <li>
      <a href="../../tutorials/practical2-4/practical2-4.html">Practical2-4</a>
    </li>
    <li>
      <a href="../../tutorials/practical2-5/practical2-5.html">Practical2-5</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/IBAHCM/RPiR/discussions">
    <span class="far fa-comments"></span>
     
    Discussion
  </a>
</li>
<li>
  <a href="https://github.com/IBAHCM/RPiR/">
    <span class="fab fa-github"></span>
     
    GitHub
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="far fa-file-code"></span>
     
    Reference
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../reference/index.html">RPiR function reference</a>
    </li>
    <li>
      <a href="../../articles/pages/reference.html">Reference materials</a>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Specific techniques</a>
      <ul class="dropdown-menu" role="menu">
<li>
          <a href="../../articles/pages/loops.html">Loops -- for / while</a>
        </li>
        <li>
          <a href="../../articles/pages/flow.html">Flow control -- if / else and comparisons</a>
        </li>
        <li>
          <a href="../../articles/pages/functions.html">Functions</a>
        </li>
        <li>
          <a href="../../articles/pages/packages.html">R Packages</a>
        </li>
      </ul>
</li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="far fa-file"></span>
     
    Guides
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pages/github.html">Create a repository on GitHub</a>
    </li>
    <li>
      <a href="../../articles/pages/rstudio.html">RStudio projects and GitHub</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="far fa-file"></span>
     
    Installation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pages/install_github.html">github</a>
    </li>
    <li>
      <a href="../../articles/pages/install_RPiR.html">package</a>
    </li>
    <li>
      <a href="../../articles/pages/vscode_liveshare.html">vscode</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="packages_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>R Packages</h1>
            
            <h4 class="date">February 02 2021</h4>
      
      
      <div class="hidden name"><code>packages.Rmd</code></div>

    </div>

    
    
<p><em>R packages</em></p>
<p>The easiest way to create an R package in RStudio is to generate one automatically in the menus, via <span style="color: #de77ae;">File &gt; New project… &gt; New Directory &gt; R Package</span>. Give your package a suitably descriptive name <code>packagename</code>, remembering that it’s good practice for the name of your repository to match the name of your package. It’s important to be aware that the name of a package:</p>
<blockquote>
<p>“should contain only (ASCII) letters, numbers and dot, have at least two characters and start with a letter and not end in a dot” (<a href="https://cran.r-project.org/doc/manuals/R-exts.html">ref</a>).</p>
</blockquote>
<p>Though very few <a href="https://cran.r-project.org/web/packages/available_packages_by_name.html">package names</a> include a dot.</p>
<p>Once you’ve picked a good name, check the box next to <span style="color: #de77ae;">Create a git repository</span>, then click on <span style="color: #de77ae;">Create Project</span>.</p>
<p><img src="images/packages/1.png" width="100%" style="display: block; margin: auto;"></p>
<p>You should find that (1) a new RStudio project has been created called <span style="color: #de77ae;">packagename</span>, (2) your working directory is now <span style="color: #de77ae;">packagename</span>, and (3) inside this directory are a number of files and directories:</p>
<p><img src="images/packages/2.png" width="100%" style="display: block; margin: auto;"></p>
<p>We’ll explore these files in due course. In the mean time, <span style="color: #de77ae;">commit</span> these files with a nice descriptive comment, but don’t push just yet.</p>
<p><img src="images/packages/3.png" width="100%" style="display: block; margin: auto;"></p>
<p>First, we need to set up a GitHub repository and while there are a number of ways to do this, the easiest way to connect an existing RStudio project to GitHub is by running this:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_github.html">use_github</a></span><span class="op">(</span>organisation <span class="op">=</span> <span class="st">"IBAHCM"</span>, private <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>This process will automatically edit your <span style="color: #de77ae;">DESCRIPTION</span> file and ask whether it’s OK to commit these changes, so just say yes, and your GitHub repository should open automatically in a window in your browser.</p>
<p><img src="images/packages/4.png" width="100%" style="display: block; margin: auto;"></p>
<p>We don’t have a README yet, so click <span style="color: #de77ae;">Add a README</span> and type something nice in your README file (in your browser), then scroll down and <span style="color: #de77ae;">Commit new file</span>. Your GitHub repository should now look something like this:</p>
<p><img src="images/packages/5.png" width="100%" style="display: block; margin: auto;"></p>
<p>and RStudio should look like this:</p>
<p><img src="images/packages/6.png" width="100%" style="display: block; margin: auto;"></p>
<p>Now that we’re connected to GitHub, click on the blue <span style="color: #de77ae;">Pull</span> arrow. When you do this, you should see that the <span style="color: #de77ae;">README.md</span> file has been pulled down from GitHub and is in your working directory, with contents matching what you wrote on GitHub. Open it and confirm this for yourself, and close that <span style="color: #de77ae;">hello.R</span> file – it was automatically generated by RStudio and we don’t need it.</p>
<p><img src="images/packages/7.png" width="100%" style="display: block; margin: auto;"></p>
<p>In fact, there are a couple of files we should delete. The <span style="color: #de77ae;">hello.R</span> file, in the <span style="color: #de77ae;">R</span> directory:</p>
<p><img src="images/packages/8.png" width="100%" style="display: block; margin: auto;"></p>
<p>The <span style="color: #de77ae;">hello.Rd</span> file, in the <span style="color: #de77ae;">man</span> directory (documentation related to the hello.R file we don’t need):</p>
<p><img src="images/packages/9.png" width="100%" style="display: block; margin: auto;"></p>
<p>and the <span style="color: #de77ae;">NAMESPACE</span> file in the package root:</p>
<p><img src="images/packages/10.png" width="100%" style="display: block; margin: auto;"></p>
<p>Now run <code><a href="https://devtools.r-lib.org//reference/document.html">devtools::document()</a></code> from the package root. You’ll notice, in the <span style="color: #de77ae;">Git</span> tab, <span style="color: #de77ae;">NAMESPACE</span> has changed from deleted to modified. This is because <code><a href="https://devtools.r-lib.org//reference/document.html">devtools::document()</a></code> created a new <span style="color: #de77ae;">NAMESPACE</span> file. Why did we just delete and recreate <span style="color: #de77ae;">NAMESPACE</span>? Because from now on, it will be automatically populated whenever we call <code><a href="https://devtools.r-lib.org//reference/document.html">devtools::document()</a></code>, which is only possible if we use <code><a href="https://devtools.r-lib.org//reference/document.html">devtools::document()</a></code> to create a new file.</p>
<p><img src="images/packages/11.png" width="100%" style="display: block; margin: auto;"></p>
<div id="functions-and-documentation" class="section level2">
<h2 class="hasAnchor">
<a href="#functions-and-documentation" class="anchor"></a>Functions and documentation</h2>
<p>Now I’m going to add a new function (you can add any function you like). Make sure the name of your function is the same as the file you’re writing in and save it in the <span style="color: #de77ae;">R</span> directory. I’ve also added some documentation above the function (details describing how to write this are below).</p>
<p>We can run <code><a href="https://devtools.r-lib.org//reference/document.html">devtools::document()</a></code> in the package root to automatically generate the documentation files in the <span style="color: #de77ae;">man</span> directory. After which you can run <code>?my_plot</code> to look at it.</p>
<p><img src="images/packages/13.png" width="100%" style="display: block; margin: auto;"></p>
<p>The first line is the title.</p>
<pre><code>#' my_plot</code></pre>
<p>The next section (separated by a blank line) is the <strong>Description</strong>. The description can continue onto multiple lines so long as you don’t start writing paragraphs with blank lines between them. This is true for all of the following examples.</p>
<pre><code>#' A very simple plotting function</code></pre>
<p><strong>Usage</strong> is generated automatically from the function itself.</p>
<p>After that everything has been labeled with a tag, so order doesn’t really matter, but the <code>@param</code> tag is used to document the <strong>Arguments</strong>. Note the format here is <code>@param argument description</code>.</p>
<pre><code>#' @param data \code{data.frame} containing data
#' @param x column containing x-axis data
#' @param y column containing y-axis data
#' @param title \code{string} containing plot title</code></pre>
<p>The <code>@return</code> tag is used to document the output of the function in the <strong>Value</strong> section.</p>
<pre><code>#' @return Returns a \code{ggplot} object</code></pre>
<p>The <code>@export</code> tag is used to identify this function as being exported by your package. That is, a function intended to be usable and not internal (a function that cannot be called, but is used internally by other functions).</p>
<pre><code>#' @export</code></pre>
<p>Finally, the <code>@examples</code> tag is used to document the <strong>Examples</strong> section. Note that here, you can use blank lines if you want and as usual, comments are encouraged.</p>
<pre><code>#' @examples
#' # Generate data
#' data &lt;- data.frame(R = 1:5, fun = c(1:5)^2)
#' # Plot results
#' my_plot(data, R, fun, "Plot showing how fun increases with R")</code></pre>
<p>We want to be able to install this function as part of our package, but there’s one thing left to do before we can do that. Our function, <code>my_plot()</code> is dependent on the <code>ggplot2</code> package. That is,</p>
<pre><code><a href="https://usethis.r-lib.org/reference/use_package.html">usethis::use_package("ggplot2", type = "Imports")</a></code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Sonia Mitchell, Richard Reeve.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
